(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{105:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d}));var o=a(0),n=a.n(o);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=n.a.createContext({}),b=function(e){var t=n.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=b(e.components);return n.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},m=n.a.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),u=b(a),m=o,d=u["".concat(i,".").concat(m)]||u[m]||p[m]||r;return a?n.a.createElement(d,l(l({ref:t},s),{},{components:a})):n.a.createElement(d,l({ref:t},s))}));function d(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var s=2;s<r;s++)i[s]=a[s];return n.a.createElement.apply(null,i)}return n.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"},89:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return l})),a.d(t,"toc",(function(){return c})),a.d(t,"default",(function(){return b}));var o=a(3),n=a(7),r=(a(0),a(105)),i={title:"Using Glue Studio",description:"Using AWS Glue Studio to create ETL processes.",layout:"playbook_js",tags:"playbook"},l={unversionedId:"playbook/using-glue-studio",id:"playbook/using-glue-studio",isDocsHomePage:!1,title:"Using Glue Studio",description:"Using AWS Glue Studio to create ETL processes.",source:"@site/docs/playbook/using-glue-studio.md",slug:"/playbook/using-glue-studio",permalink:"/Data-Platform-Playbook/playbook/using-glue-studio",editUrl:"https://github.com/LBHackney-IT/data-platform-playbook/edit/master/docs/playbook/using-glue-studio.md",version:"current",sidebar:"docs",previous:{title:"Google Sheets import",permalink:"/Data-Platform-Playbook/playbook/google-sheets-import"},next:{title:"Exporting snapshot to s3",permalink:"/Data-Platform-Playbook/playbook/snapshot-to-s3"}},c=[{value:"Using AWS Glue Studio to create ETL processes",id:"using-aws-glue-studio-to-create-etl-processes",children:[]},{value:"Creating a new Glue job",id:"creating-a-new-glue-job",children:[]},{value:"Clone and edit an existing Glue job",id:"clone-and-edit-an-existing-glue-job",children:[]}],s={toc:c};function b(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(r.b)("wrapper",Object(o.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"using-aws-glue-studio-to-create-etl-processes"},"Using AWS Glue Studio to create ETL processes"),Object(r.b)("p",null,Object(r.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/glue/latest/ug/what-is-glue-studio.html"},"AWS Glue Studio")," is a new graphical interface that makes it easy to create, run, and monitor extract, transform, and load (ETL) jobs in AWS Glue."),Object(r.b)("p",null,"To use AWS Glue Studio the job needs to be created manually. This guide includes the steps needed to create an editable job in Glue Studio. Templates may have already been created and existing jobs can be duplicated to make it easier to get started with Glue Studio. Dynamically created scripts using ",Object(r.b)("a",{parentName:"p",href:"https://www.terraform.io/"},"terraform")," (the infrastructure as code tool Hackney use) will not have the ability to use the visual editor."),Object(r.b)("p",null,"Note: If a job has already been created manually you can select the job using the radio button and in the job ",Object(r.b)("em",{parentName:"p"},"Actions")," mennu, select ",Object(r.b)("strong",{parentName:"p"},"Clone job"),"."),Object(r.b)("h2",{id:"creating-a-new-glue-job"},"Creating a new Glue job"),Object(r.b)("p",null,"Note: The instructions below assume an S3 Data Source and Target Location."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Log in to AWS Management Console."),Object(r.b)("li",{parentName:"ol"},"Select the ",Object(r.b)("strong",{parentName:"li"},"AWS Glue")," service from the services menu (or search field)."),Object(r.b)("li",{parentName:"ol"},"From the AWS Glue menu ETL section, select ",Object(r.b)("strong",{parentName:"li"},"AWS Glue Studio"),"."),Object(r.b)("li",{parentName:"ol"},"From the AWS Glue Studio main page, choose the ",Object(r.b)("strong",{parentName:"li"},"Create and manage jobs")," option."),Object(r.b)("li",{parentName:"ol"},"Within the ",Object(r.b)("em",{parentName:"li"},"Create Job")," section, select ",Object(r.b)("strong",{parentName:"li"},"Source and target added to the graph")," and select desired Source and Target values."),Object(r.b)("li",{parentName:"ol"},"Click the ",Object(r.b)("strong",{parentName:"li"},"Create")," button."),Object(r.b)("li",{parentName:"ol"},"In the Visual editor that is now displayed, click on the ",Object(r.b)("em",{parentName:"li"},"Data Source - S3")," box and in the ",Object(r.b)("em",{parentName:"li"},"Data source properties - S3")," tab to set ",Object(r.b)("em",{parentName:"li"},"S3 source type")," to ",Object(r.b)("strong",{parentName:"li"},"S3 location")," and set the ",Object(r.b)("em",{parentName:"li"},"S3 URL")," for the source data."),Object(r.b)("li",{parentName:"ol"},"Also ",Object(r.b)("em",{parentName:"li"},"Data Target - S3")," box and in the ",Object(r.b)("em",{parentName:"li"},"Data target properties - S3")," tab set the ",Object(r.b)("em",{parentName:"li"},"S3 URL")," for the data target, usually your department folder in the Data Platform account (you can add additional folders at this point for your new data within your department folder). ",Object(r.b)("strong",{parentName:"li"},"Data source and data target (amongst other operations) must be set to be able to save the job. You can also apply ",Object(r.b)("em",{parentName:"strong"},"Transformations")," specific to your job via the Visual tab. See the ",Object(r.b)("a",{parentName:"strong",href:"https://docs.aws.amazon.com/glue/latest/ug/edit-nodes-chapter.html"},"AWS Glue Studio Documentation")),"."),Object(r.b)("li",{parentName:"ol"},"To complete the set up you need to select the ",Object(r.b)("strong",{parentName:"li"},"Job details")," tab."),Object(r.b)("li",{parentName:"ol"},"Complete the ",Object(r.b)("em",{parentName:"li"},"Name")," and optional ",Object(r.b)("em",{parentName:"li"},"Description")," fields. You may use this job as a template for repeat use, so a generic name to use as a template might be useful to begin with."),Object(r.b)("li",{parentName:"ol"},"Select ",Object(r.b)("strong",{parentName:"li"},"dataplatform-{environment}-glue-role"),"  where environment is either 'stg' or 'prod'; as the ",Object(r.b)("em",{parentName:"li"},"IAM Role")," for the job."),Object(r.b)("li",{parentName:"ol"},"The remaining standard fields default values are usually fine to use. The programming language Glue Studio creates can be Scala or Python."),Object(r.b)("li",{parentName:"ol"},"In ",Object(r.b)("em",{parentName:"li"},"Advanced properties")," check the ",Object(r.b)("em",{parentName:"li"},"Script filename")," refers to the task being carried out."),Object(r.b)("li",{parentName:"ol"},"Set the ",Object(r.b)("em",{parentName:"li"},"Script path")," to the central scripts S3 bucket: ",Object(r.b)("inlineCode",{parentName:"li"},"s3://dataplatform-{environment}-glue-scripts/custom/")," where environment is either 'stg' or 'prod' - you can create new folders or specify existing folders in the S3 bucket like this: ",Object(r.b)("inlineCode",{parentName:"li"},"s3://dataplatform-{environment}-glue-scripts/custom/YOUR_FOLDER_NAME/"),"."),Object(r.b)("li",{parentName:"ol"},"In ",Object(r.b)("em",{parentName:"li"},"Security configuration")," select the appropriate security configuration for your target bucket location (for example for the Raw Zone, use ",Object(r.b)("strong",{parentName:"li"},"glue-job-security-configuration-to-raw"),")."),Object(r.b)("li",{parentName:"ol"},"Ensure the ",Object(r.b)("em",{parentName:"li"},"Server-side encryption")," option is ",Object(r.b)("strong",{parentName:"li"},"checked"),"."),Object(r.b)("li",{parentName:"ol"},"Add any further libraries or parameters you need in the ",Object(r.b)("em",{parentName:"li"},"Advanced properties")," section.")),Object(r.b)("h2",{id:"clone-and-edit-an-existing-glue-job"},"Clone and edit an existing Glue job"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"In the ",Object(r.b)("em",{parentName:"li"},"Your jobs")," sections, select the radio button of the job you would like to clone."),Object(r.b)("li",{parentName:"ol"},"In the ",Object(r.b)("em",{parentName:"li"},"Actions")," dropdown, select ",Object(r.b)("em",{parentName:"li"},"Clone job"),". If there is an information banner with a message ",Object(r.b)("em",{parentName:"li"},"Your job was created outside of Glue Studio and has no DAG available")," (see screenshot below) there will not be a Visual tab and therefore you will not have an interface to edit your job. Instead you will need to edit your job in the python job script. To do this navigate to the ",Object(r.b)("em",{parentName:"li"},"Script")," tab. If you prefer to use the interface, then select another job which has a Visual tab or create a new job as instructed in the ",Object(r.b)("em",{parentName:"li"},"Creating a new Glue job")," section above.\n",Object(r.b)("img",{parentName:"li",src:"https://user-images.githubusercontent.com/46002877/114702251-bcac0500-9d1b-11eb-8475-814523fd58dc.png",alt:"image"})),Object(r.b)("li",{parentName:"ol"},"In the Job Details tab, update the ",Object(r.b)("em",{parentName:"li"},"Name")," for your new job and check the ",Object(r.b)("em",{parentName:"li"},"Creating a new Glue job")," seciton above to ensure the configuration suits your needs."),Object(r.b)("li",{parentName:"ol"},"To save your job, select the ",Object(r.b)("strong",{parentName:"li"},Object(r.b)("em",{parentName:"strong"},"Save"))," button.")))}b.isMDXComponent=!0}}]);