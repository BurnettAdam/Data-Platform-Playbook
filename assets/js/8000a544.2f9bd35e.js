"use strict";(self.webpackChunkdata_platform_playbook=self.webpackChunkdata_platform_playbook||[]).push([[3458],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return f}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.createContext({}),s=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},g=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),g=s(n),f=o,d=g["".concat(u,".").concat(f)]||g[f]||p[f]||a;return n?r.createElement(d,i(i({ref:t},c),{},{components:n})):r.createElement(d,i({ref:t},c))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=g;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var s=2;s<a;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}g.displayName="MDXCreateElement"},3432:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return u},metadata:function(){return s},toc:function(){return c},default:function(){return g}});var r=n(7462),o=n(3366),a=(n(7294),n(3905)),i=["components"],l={title:"Querying the Platform using SQL",description:"AWS Athena to query data in S3",layout:"playbook_js",tags:["playbook"]},u=void 0,s={unversionedId:"playbook/querying-data-using-sql",id:"playbook/querying-data-using-sql",isDocsHomePage:!1,title:"Querying the Platform using SQL",description:"AWS Athena to query data in S3",source:"@site/docs/playbook/querying-data-using-sql.md",sourceDirName:"playbook",slug:"/playbook/querying-data-using-sql",permalink:"/Data-Platform-Playbook/playbook/querying-data-using-sql",editUrl:"https://github.com/LBHackney-IT/data-platform-playbook/edit/master/docs/playbook/querying-data-using-sql.md",tags:[{label:"playbook",permalink:"/Data-Platform-Playbook/tags/playbook"}],version:"current",frontMatter:{title:"Querying the Platform using SQL",description:"AWS Athena to query data in S3",layout:"playbook_js",tags:["playbook"]},sidebar:"docs",previous:{title:"Onboarding new users to the platform",permalink:"/Data-Platform-Playbook/playbook/onboarding-new-users-to-the-platform"},next:{title:"Scheduling Liberator Glue Jobs",permalink:"/Data-Platform-Playbook/playbook/scheduling-liberator-glue-jobs"}},c=[{value:"Intro",id:"intro",children:[]},{value:"Logging into Athena",id:"logging-into-athena",children:[]},{value:"Running queries",id:"running-queries",children:[]}],p={toc:c};function g(e){var t=e.components,l=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"intro"},"Intro"),(0,a.kt)("p",null,"The Data Platform provides AWS Athena as the tool to execute SQL queries against the data within the platform."),(0,a.kt)("p",null,"AWS Athena is built on top of Presto, and we're using Athena engine version 2.\nAWS provide ",(0,a.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/athena/latest/ug/presto-functions.html"},"documenation on what functions")," they make available as part of their ",(0,a.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/athena/latest/ug/ddl-sql-reference.html"},"SQL reference"),"."),(0,a.kt)("h2",{id:"logging-into-athena"},"Logging into Athena"),(0,a.kt)("p",null,"After logging into the Data Platform AWS account, navigate to Athena using the AWS console."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Searching for Athena in the AWS navigation bar",src:n(1082).Z})),(0,a.kt)("p",null,"You'll want to make sure that your region is currently set to London, in AWS this is achieved using the region selector as shown below."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"AWS Console region selector",src:n(1911).Z})),(0,a.kt)("p",null,"Then you'll want to ensure that you are switched to the Athena Workgroup for your department.\nYou can check your current workgroup by hovering over the workgroup tab displayed at the top of the Athena page.\nIf the workgroup isn't correct then ",(0,a.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/athena/latest/ug/workgroups-create-update-delete.html#switching-workgroups"},"switch your workgroup")," to the one you were given before proceeding."),(0,a.kt)("h2",{id:"running-queries"},"Running queries"),(0,a.kt)("p",null,'From the "Query editor" you should have access to a number of tables, from which you can construct and execute queries.'),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"AWS Athena query editor",src:n(6814).Z})))}g.isMDXComponent=!0},1082:function(e,t,n){t.Z=n.p+"assets/images/navigate-athena-f1a8c31818223bd10c26c33e9d2e6d2d.png"},6814:function(e,t,n){t.Z=n.p+"assets/images/query-athena-8fdc548739748041aab9663f8df9aea1.png"},1911:function(e,t,n){t.Z=n.p+"assets/images/region-selector-46ef6caf1f7a96986fd27de3f0da463c.png"}}]);