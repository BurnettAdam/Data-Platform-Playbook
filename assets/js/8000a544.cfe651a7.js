"use strict";(self.webpackChunkdata_platform_playbook=self.webpackChunkdata_platform_playbook||[]).push([[3458],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return g}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),c=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=c(e.components);return a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=c(n),g=r,h=d["".concat(u,".").concat(g)]||d[g]||p[g]||o;return n?a.createElement(h,i(i({ref:t},s),{},{components:n})):a.createElement(h,i({ref:t},s))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3432:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return u},metadata:function(){return c},toc:function(){return s},default:function(){return d}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=["components"],l={title:"Querying the Data Platform using SQL within AWS Athena",description:"AWS Athena to query data in S3",layout:"playbook_js",tags:["playbook"]},u=void 0,c={unversionedId:"playbook/querying-data-using-sql",id:"playbook/querying-data-using-sql",isDocsHomePage:!1,title:"Querying the Data Platform using SQL within AWS Athena",description:"AWS Athena to query data in S3",source:"@site/docs/playbook/querying-data-using-sql.md",sourceDirName:"playbook",slug:"/playbook/querying-data-using-sql",permalink:"/Data-Platform-Playbook/playbook/querying-data-using-sql",editUrl:"https://github.com/LBHackney-IT/data-platform-playbook/edit/master/docs/playbook/querying-data-using-sql.md",tags:[{label:"playbook",permalink:"/Data-Platform-Playbook/tags/playbook"}],version:"current",frontMatter:{title:"Querying the Data Platform using SQL within AWS Athena",description:"AWS Athena to query data in S3",layout:"playbook_js",tags:["playbook"]},sidebar:"docs",previous:{title:"Onboarding new users and departments to the platform",permalink:"/Data-Platform-Playbook/playbook/onboarding-new-users-to-the-platform"},next:{title:"Scheduling Liberator Glue Jobs",permalink:"/Data-Platform-Playbook/playbook/scheduling-liberator-glue-jobs"}},s=[{value:"Objective",id:"objective",children:[]},{value:"Intended audience",id:"intended-audience",children:[]},{value:"Background",id:"background",children:[]},{value:"Logging into Athena",id:"logging-into-athena",children:[]},{value:"Running queries",id:"running-queries",children:[]}],p={toc:s};function d(e){var t=e.components,l=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"objective"},"Objective"),(0,o.kt)("p",null,"To be able to query data within the Data Platform using SQL."),(0,o.kt)("h2",{id:"intended-audience"},"Intended audience"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Data Analyst")),(0,o.kt)("h2",{id:"background"},"Background"),(0,o.kt)("p",null,"The Data Platform provides AWS Athena as the tool to execute SQL queries against the data within the platform."),(0,o.kt)("p",null,"AWS Athena is built on top of Presto, and we're using Athena engine version 2.\nAWS provide ",(0,o.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/athena/latest/ug/presto-functions.html"},"documenation on what functions")," they make available as part of their ",(0,o.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/athena/latest/ug/ddl-sql-reference.html"},"SQL reference"),"."),(0,o.kt)("h2",{id:"logging-into-athena"},"Logging into Athena"),(0,o.kt)("p",null,"After logging into the Data Platform AWS account, navigate to Athena using the AWS console."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Searching for Athena in the AWS navigation bar",src:n(1082).Z})),(0,o.kt)("p",null,"You'll want to make sure that your region is currently set to London, in AWS this is achieved using the region selector as shown below."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"AWS Console region selector",src:n(1911).Z})),(0,o.kt)("p",null,"Then you'll want to ensure that you are switched to the Athena Workgroup for your department. You can check your current workgroup by hovering over the workgroup tab displayed at the top of the Athena page. If the workgroup isn't correct then ",(0,o.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/athena/latest/ug/workgroups-create-update-delete.html#switching-workgroups"},"switch your workgroup")," to the one you were given before proceeding."),(0,o.kt)("h2",{id:"running-queries"},"Running queries"),(0,o.kt)("p",null,'From the "Query editor" you should have access to a number of tables, from which you can construct and execute queries.'),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"AWS Athena query editor",src:n(6814).Z})))}d.isMDXComponent=!0},1082:function(e,t,n){t.Z=n.p+"assets/images/navigate-athena-f1a8c31818223bd10c26c33e9d2e6d2d.png"},6814:function(e,t,n){t.Z=n.p+"assets/images/query-athena-8fdc548739748041aab9663f8df9aea1.png"},1911:function(e,t,n){t.Z=n.p+"assets/images/region-selector-46ef6caf1f7a96986fd27de3f0da463c.png"}}]);