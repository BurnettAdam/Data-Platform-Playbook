(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{114:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return h}));var o=a(0),n=a.n(o);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var b=n.a.createContext({}),u=function(e){var t=n.a.useContext(b),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=u(e.components);return n.a.createElement(b.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},d=n.a.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,b=s(e,["components","mdxType","originalType","parentName"]),c=u(a),d=o,h=c["".concat(l,".").concat(d)]||c[d]||p[d]||r;return a?n.a.createElement(h,i(i({ref:t},b),{},{components:a})):n.a.createElement(h,i({ref:t},b))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,l=new Array(r);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var b=2;b<r;b++)l[b]=a[b];return n.a.createElement.apply(null,l)}return n.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"},86:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return i})),a.d(t,"toc",(function(){return s})),a.d(t,"default",(function(){return u}));var o=a(3),n=a(7),r=(a(0),a(114)),l={title:"Scheduling Liberator Glue Jobs",description:"Schedule a glue job to run when new liberator data is added into the platform",layout:"playbook_js",tags:"playbook"},i={unversionedId:"playbook/scheduling-liberator-glue-jobs",id:"playbook/scheduling-liberator-glue-jobs",isDocsHomePage:!1,title:"Scheduling Liberator Glue Jobs",description:"Schedule a glue job to run when new liberator data is added into the platform",source:"@site/docs/playbook/scheduling-liberator-glue-jobs.md",slug:"/playbook/scheduling-liberator-glue-jobs",permalink:"/Data-Platform-Playbook/playbook/scheduling-liberator-glue-jobs",editUrl:"https://github.com/LBHackney-IT/data-platform-playbook/edit/master/docs/playbook/scheduling-liberator-glue-jobs.md",version:"current",sidebar:"docs",previous:{title:"Glue Studio workshop with Parking Analysts",permalink:"/Data-Platform-Playbook/workshop/aws_glue_studio_parking"},next:{title:"Exporting database snapshots to the Data Platform Landing Zone",permalink:"/Data-Platform-Playbook/docs/exporting-snapshot-to-landing-zone"}},s=[{value:"Intro",id:"intro",children:[]},{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Steps",id:"steps",children:[]}],b={toc:s};function u(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(r.b)("wrapper",Object(o.a)({},b,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"intro"},"Intro"),Object(r.b)("p",null,"This guide will step you through how to schedule a glue job, from the AWS console, that runs on the liberator data in the ",Object(r.b)("a",{parentName:"p",href:"/Data-Platform-Playbook/zones#landing-zone"},"landing zone"),"."),Object(r.b)("p",null,"Scheduling your glue job will mean that it will run whenever new liberator data is added in the data platform so that your\ntransformed data in, say, the ",Object(r.b)("a",{parentName:"p",href:"/Data-Platform-Playbook/zones#refined-zone"},"refined zone")," is based on the most up to date data, with no manual intervention. "),Object(r.b)("h2",{id:"prerequisites"},"Prerequisites"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"You have created a glue job that transforms the liberator data in the ",Object(r.b)("a",{parentName:"li",href:"/Data-Platform-Playbook/zones#landing-zone"},"landing zone"),". There is guidance on ",Object(r.b)("a",{parentName:"li",href:"/Data-Platform-Playbook/playbook/using-glue-studio"},"creating a glue job")," and a ",Object(r.b)("a",{parentName:"li",href:"/Data-Platform-Playbook/workshop/aws_glue_studio_parking"},"workshop")," if you need help with this."),Object(r.b)("li",{parentName:"ul"},"You have access to the Hackney Data Platform")),Object(r.b)("h2",{id:"steps"},"Steps"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Sign in to the ",Object(r.b)("a",{parentName:"p",href:"https://hackney.awsapps.com/start#/"},"AWS Management Console"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"In ",Object(r.b)("a",{parentName:"p",href:"https://eu-west-2.console.aws.amazon.com/gluestudio/home?region=eu-west-2#/jobs"},"AWS Glue Studio"),", Check the properties for all of the ",Object(r.b)("strong",{parentName:"p"},"Data targets"),' in your glue job. Ensure you have the following properties set in the "Data target properties" tab.'),Object(r.b)("ol",{parentName:"li"},Object(r.b)("li",{parentName:"ol"},'The Format is set to "Glue Parquet"'),Object(r.b)("li",{parentName:"ol"},'Under "Data Catalog update options", the option "Create a table in the Data Catalog and on subsequent runs, update the schema and add new partitions" is selected.'),Object(r.b)("li",{parentName:"ol"},'A "Database" and "Table name" should also be filled in.')))),Object(r.b)("p",null,"This is so that the job will update the tables in ",Object(r.b)("a",{parentName:"p",href:"https://eu-west-2.console.aws.amazon.com/athena/home?region=eu-west-2#query"},"AWS Athena")," after it runs, without having to run a crawler."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Navigate to ",Object(r.b)("a",{parentName:"p",href:"https://eu-west-2.console.aws.amazon.com/glue/home?region=eu-west-2#etl:tab=triggers"},"Amazon Glue Triggers"),".")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Select the trigger named ",Object(r.b)("inlineCode",{parentName:"p"},"trigger-liberator-jobs")," by checking the box.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},'Click on "Action" to open the dropdown. Click on "Choose jobs to trigger".')),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},'Look for the job you just created in the "All Jobs" list on the left. Click "Add" next to your job, so that it moves to the "Jobs to start" list on the right.')),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},'Click "Choose jobs" at the bottom.'))),Object(r.b)("p",null,"Your job is now scheduled to run when new liberator data is added to the landing zone."))}u.isMDXComponent=!0}}]);