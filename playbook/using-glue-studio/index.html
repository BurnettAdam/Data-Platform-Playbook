<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/Data-Platform-Playbook/blog/rss.xml" title="Hackney Data Platform Playbook Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Data-Platform-Playbook/blog/atom.xml" title="Hackney Data Platform Playbook Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Hackney Data Platform Playbook" href="/Data-Platform-Playbook/opensearch.xml"><title data-react-helmet="true">Using Glue Studio | Hackney Data Platform Playbook</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Using Glue Studio | Hackney Data Platform Playbook"><meta data-react-helmet="true" name="description" content="Using AWS Glue Studio to create ETL processes."><meta data-react-helmet="true" property="og:description" content="Using AWS Glue Studio to create ETL processes."><meta data-react-helmet="true" property="og:url" content="https://playbook.hackney.gov.uk/Data-Platform-Playbook//Data-Platform-Playbook/playbook/using-glue-studio"><link data-react-helmet="true" rel="shortcut icon" href="/Data-Platform-Playbook/img/favicon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://playbook.hackney.gov.uk/Data-Platform-Playbook//Data-Platform-Playbook/playbook/using-glue-studio"><link rel="stylesheet" href="/Data-Platform-Playbook/styles.2116970b.css">
<link rel="stylesheet" href="/Data-Platform-Playbook/main.4a16e2e4.css">
<link rel="preload" href="/Data-Platform-Playbook/styles.04b4c8b7.js" as="script">
<link rel="preload" href="/Data-Platform-Playbook/runtime~main.7c1d0368.js" as="script">
<link rel="preload" href="/Data-Platform-Playbook/main.88a1630d.js" as="script">
<link rel="preload" href="/Data-Platform-Playbook/1.780a53b9.js" as="script">
<link rel="preload" href="/Data-Platform-Playbook/2.1a398a46.js" as="script">
<link rel="preload" href="/Data-Platform-Playbook/41.67394f35.js" as="script">
<link rel="preload" href="/Data-Platform-Playbook/44.feeca3c8.js" as="script">
<link rel="preload" href="/Data-Platform-Playbook/935f2afb.13720715.js" as="script">
<link rel="preload" href="/Data-Platform-Playbook/17896441.3633c950.js" as="script">
<link rel="preload" href="/Data-Platform-Playbook/a16551cf.73cc2ae6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/Data-Platform-Playbook/"><img src="/Data-Platform-Playbook/img/logo-long.svg" alt="Data Platform Playbook" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/Data-Platform-Playbook/img/logo-long.svg" alt="Data Platform Playbook" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Data Platform Playbook</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/LBHackney-IT/data-platform-playbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/Data-Platform-Playbook/"><img src="/Data-Platform-Playbook/img/logo-long.svg" alt="Data Platform Playbook" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/Data-Platform-Playbook/img/logo-long.svg" alt="Data Platform Playbook" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Data Platform Playbook</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/LBHackney-IT/data-platform-playbook" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/Data-Platform-Playbook/release-notes">Release Notes</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Data-Platform-Playbook/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Data-Platform-Playbook/zones">Zones</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Data-Platform-Playbook/environments">Environments</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Playbook</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/playbook/google-sheets-import">Google Sheets import</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Data-Platform-Playbook/playbook/using-glue-studio">Using Glue Studio</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/playbook/exporting-snapshot-to-landing-zone">Exporting database snapshot to the Data Platform Landing Zone</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/playbook/ingest-data-from-csv-files">Ingest data from csv files</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Technical Documentation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Data-Platform-Playbook/docs/exporting-snapshot-to-landing-zone">Exporting database snapshots to the Data Platform Landing Zone</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Architecture Decision</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Data-Platform-Playbook/architecture-decisions/index">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Records</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Data-Platform-Playbook/architecture-decisions/0001-record-architecture-decisions">Record architecture decisions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Data-Platform-Playbook/architecture-decisions/0002-ingest-google-sheets-data">Ingest Google Sheets Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Data-Platform-Playbook/architecture-decisions/0003-role-based-access-control">Role-Based Access Control</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Data-Platform-Playbook/architecture-decisions/0004-partition-strategy">Partition Strategy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Data-Platform-Playbook/architecture-decisions/0005-recovered-data">Recovered Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Data-Platform-Playbook/architecture-decisions/0006-ingest-sql-flat-files">Ingest SQL flat files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Data-Platform-Playbook/architecture-decisions/0007-sftp-to-s3-lambda">Copy Liberator data from sftp to s3</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Using Glue Studio</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="using-aws-glue-studio-to-create-etl-processes"></a>Using AWS Glue Studio to create ETL processes<a class="hash-link" href="#using-aws-glue-studio-to-create-etl-processes" title="Direct link to heading">#</a></h2><p><a href="https://docs.aws.amazon.com/glue/latest/ug/what-is-glue-studio.html" target="_blank" rel="noopener noreferrer">AWS Glue Studio</a> is a new graphical interface that makes it easy to create, run, and monitor extract, transform, and load (ETL) jobs in AWS Glue.</p><p>To use AWS Glue Studio the job needs to be created manually. This guide includes the steps needed to create an editable job in Glue Studio. Templates may have already been created and existing jobs can be duplicated to make it easier to get started with Glue Studio. Dynamically created scripts using <a href="https://www.terraform.io/" target="_blank" rel="noopener noreferrer">terraform</a> (the infrastructure as code tool Hackney use) will not have the ability to use the visual editor.</p><p>Note: If a job has already been created manually you can select the job using the radio button and in the job <em>Actions</em> mennu, select <strong>Clone job</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="creating-a-new-glue-job"></a>Creating a new Glue job<a class="hash-link" href="#creating-a-new-glue-job" title="Direct link to heading">#</a></h2><p>Note: The instructions below assume an S3 Data Source and Target Location.</p><ol><li>Log in to AWS Management Console.</li><li>Select the <strong>AWS Glue</strong> service from the services menu (or search field).</li><li>From the AWS Glue menu ETL section, select <strong>AWS Glue Studio</strong>.</li><li>From the AWS Glue Studio main page, choose the <strong>Create and manage jobs</strong> option.</li><li>Within the <em>Create Job</em> section, select <strong>Source and target added to the graph</strong> and select desired Source and Target values.</li><li>Click the <strong>Create</strong> button.</li><li>In the Visual editor that is now displayed, click on the <em>Data Source - S3</em> box and in the <em>Data source properties - S3</em> tab to set <em>S3 source type</em> to <strong>S3 location</strong> and set the <em>S3 URL</em> for the source data.</li><li>Also <em>Data Target - S3</em> box and in the <em>Data target properties - S3</em> tab set the <em>S3 URL</em> for the data target, usually your department folder in the Data Platform account (you can add additional folders at this point for your new data within your department folder). <strong>Data source and data target (amongst other operations) must be set to be able to save the job. You can also apply <em>Transformations</em> specific to your job via the Visual tab. See the <a href="https://docs.aws.amazon.com/glue/latest/ug/edit-nodes-chapter.html" target="_blank" rel="noopener noreferrer">AWS Glue Studio Documentation</a></strong>.</li><li>To complete the set up you need to select the <strong>Job details</strong> tab.</li><li>Complete the <em>Name</em> and optional <em>Description</em> fields. You may use this job as a template for repeat use, so a generic name to use as a template might be useful to begin with.</li><li>Select <strong>dataplatform-{environment}-glue-role</strong>  where environment is either &#x27;stg&#x27; or &#x27;prod&#x27;; as the <em>IAM Role</em> for the job.</li><li>The remaining standard fields default values are usually fine to use. The programming language Glue Studio creates can be Scala or Python.</li><li>In <em>Advanced properties</em> check the <em>Script filename</em> refers to the task being carried out.</li><li>Set the <em>Script path</em> to the central scripts S3 bucket: <code>s3://dataplatform-{environment}-glue-scripts/custom/</code> where environment is either &#x27;stg&#x27; or &#x27;prod&#x27; - you can create new folders or specify existing folders in the S3 bucket like this: <code>s3://dataplatform-{environment}-glue-scripts/custom/YOUR_FOLDER_NAME/</code>.</li><li>In <em>Security configuration</em> select the appropriate security configuration for your target bucket location (for example for the Raw Zone, use <strong>glue-job-security-configuration-to-raw</strong>).</li><li>Ensure the <em>Server-side encryption</em> option is <strong>checked</strong>.</li><li>Add any further libraries or parameters you need in the <em>Advanced properties</em> section.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="note-exporting-data"></a>Note: Exporting Data<a class="hash-link" href="#note-exporting-data" title="Direct link to heading">#</a></h3><p>When exporting data from your Glue Job it is important that you follow the Data Platforms partitioning stratagy. To do this, exports must be exported with the partitions import_year, import_month, &amp; import_day at a minimum. To accomplish this using AWS Glue Studio use the <code>Add a partition</code> key option at the bottom of the Data target node. It is important to further note, that inorder to add these attributes as partitions, they must exist within the dataset as fields.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="clone-and-edit-an-existing-glue-job"></a>Clone and edit an existing Glue job<a class="hash-link" href="#clone-and-edit-an-existing-glue-job" title="Direct link to heading">#</a></h2><ol><li>In the <em>Your jobs</em> sections, select the radio button of the job you would like to clone.</li><li>In the <em>Actions</em> dropdown, select <em>Clone job</em>. If there is an information banner with a message <em>Your job was created outside of Glue Studio and has no DAG available</em> (see screenshot below) there will not be a Visual tab and therefore you will not have an interface to edit your job. Instead you will need to edit your job in the python job script. To do this navigate to the <em>Script</em> tab. If you prefer to use the interface, then select another job which has a Visual tab or create a new job as instructed in the <em>Creating a new Glue job</em> section above.
<img src="https://user-images.githubusercontent.com/46002877/114702251-bcac0500-9d1b-11eb-8475-814523fd58dc.png" alt="image"></li><li>In the Job Details tab, update the <em>Name</em> for your new job and check the <em>Creating a new Glue job</em> seciton above to ensure the configuration suits your needs.</li><li>To save your job, select the <strong><em>Save</em></strong> button.</li></ol></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/LBHackney-IT/data-platform-playbook/edit/master/docs/playbook/using-glue-studio.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Data-Platform-Playbook/playbook/google-sheets-import"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Google Sheets import</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Data-Platform-Playbook/playbook/exporting-snapshot-to-landing-zone"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Exporting database snapshot to the Data Platform Landing Zone Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#using-aws-glue-studio-to-create-etl-processes" class="table-of-contents__link">Using AWS Glue Studio to create ETL processes</a></li><li><a href="#creating-a-new-glue-job" class="table-of-contents__link">Creating a new Glue job</a><ul><li><a href="#note-exporting-data" class="table-of-contents__link">Note: Exporting Data</a></li></ul></li><li><a href="#clone-and-edit-an-existing-glue-job" class="table-of-contents__link">Clone and edit an existing Glue job</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Made by HackIT.</div></div></div></footer></div>
<script src="/Data-Platform-Playbook/styles.04b4c8b7.js"></script>
<script src="/Data-Platform-Playbook/runtime~main.7c1d0368.js"></script>
<script src="/Data-Platform-Playbook/main.88a1630d.js"></script>
<script src="/Data-Platform-Playbook/1.780a53b9.js"></script>
<script src="/Data-Platform-Playbook/2.1a398a46.js"></script>
<script src="/Data-Platform-Playbook/41.67394f35.js"></script>
<script src="/Data-Platform-Playbook/44.feeca3c8.js"></script>
<script src="/Data-Platform-Playbook/935f2afb.13720715.js"></script>
<script src="/Data-Platform-Playbook/17896441.3633c950.js"></script>
<script src="/Data-Platform-Playbook/a16551cf.73cc2ae6.js"></script>
</body>
</html>